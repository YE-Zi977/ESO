{"version":3,"sources":["uni-app:///main.js","webpack:///L:/罗水华-l盘/eso/eso/ESO_UNI_APP/pages/mine/create-article/create-article.vue?ee36","webpack:///L:/罗水华-l盘/eso/eso/ESO_UNI_APP/pages/mine/create-article/create-article.vue?2a98","webpack:///L:/罗水华-l盘/eso/eso/ESO_UNI_APP/pages/mine/create-article/create-article.vue?6bd8","webpack:///L:/罗水华-l盘/eso/eso/ESO_UNI_APP/pages/mine/create-article/create-article.vue?4477","uni-app:///pages/mine/create-article/create-article.vue","webpack:///L:/罗水华-l盘/eso/eso/ESO_UNI_APP/pages/mine/create-article/create-article.vue?9666","webpack:///L:/罗水华-l盘/eso/eso/ESO_UNI_APP/pages/mine/create-article/create-article.vue?35b5"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,2H;AACAA,UAAU,CAACC,sBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2H;AAC3H;AACkE;AACL;AACc;;;AAG3E;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,yFAAM;AACR,EAAE,kGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,6FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9CA;AAAA;AAAA;AAAA;AAAwmB,CAAgB,koBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwE5nB;AACA,uBADA;AAEA,MAFA,kBAEA;AACA;AACA,cADA;AAEA,kBAFA;AAGA,qBAHA,EAGA;AACA,oBAJA,EAIA;AACA,wBALA,EAKA;AACA;AACA;AACA,qBADA;AAEA,wBAFA;AAGA,qBAHA;AAIA,sBAJA;AAKA,eALA,EADA,CANA;;AAcA;AACA,sBAfA,EAeA;AACA,gBAhBA,EAgBA;AACA,iBAjBA,EAiBA;AACA,oBAlBA,EAkBA;AACA,oBAnBA,EAmBA;AACA,oBApBA;AAqBA,iBArBA;;AAuBA,GA1BA;AA2BA;AACA,WADA,mBACA,KADA,EACA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,aAFA;AAGA;AACA,KARA;AASA,gBATA,0BASA;AACA;;AAEA;AACA;AACA;AACA,OAFA,EAEA,aAFA;;AAIA,KAjBA;AAkBA;AACA,aADA,qBACA;AACA;;AAEA;AACA;AACA;AACA,SAFA,EAEA,aAFA;AAGA,OARA;AASA,gBATA,EAlBA;;AA6BA,eA7BA,uBA6BA,KA7BA,EA6BA,QA7BA,EA6BA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,WAtBA;AAuBA,SA1BA,MA0BA;AACA;AACA;AACA;AACA,WAHA;AAIA;AACA,OAjCA,MAiCA;AACA;AACA;AACA;;AAEA,KAvEA,EA3BA;;AAoGA;AACA,SADA,mBACA;AACA;AACA,KAHA;AAIA;AACA,gBALA,0BAKA;AACA;AACA,KAPA;AAQA;AACA,aATA,uBASA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA,KAfA,EApGA;;AAqHA,QArHA,kBAqHA,OArHA,EAqHA;;AAEA;;AAEA;AACA;;AAEA,GA5HA;AA6HA,QA7HA,oBA6HA;;AAEA;;AAEA,GAjIA;AAkIA;;AAEA;AACA,kBAHA,4BAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,kBADA;AAEA,yCAFA;AAGA;AACA,qCADA,EAHA;;AAMA,0BANA;AAOA;AACA;AACA;AACA;AACA;AACA,WAZA;AAaA;AACA;AACA;AACA,WAhBA;;;AAmBA;;AAEA,KAhCA;;AAkCA;AACA,gBAnCA,0BAmCA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAHA,MAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,WAxBA;AAyBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,OAnDA,EAmDA,SAnDA;;AAqDA,KA3FA;;AA6FA;AACA,WA9FA,mBA8FA,SA9FA,EA8FA;;AAEA;AACA;AACA,4DAJA;;AAMA,kBANA,GAMA,IANA,CAMA,YANA,CAMA,YANA,GAMA,IANA,CAMA,YANA,CAMA,cANA,GAMA,IANA,CAMA,cANA;;AAQA;AACA,gBADA;AAEA,mGAFA;AAGA;AACA,mCADA;AAEA,wCAFA;AAGA,oCAHA;AAIA,+FAJA;AAKA,wBALA,EAHA;;AAUA,wBAVA;AAWA;AACA;AACA;AACA;AACA,SAfA;AAgBA;AACA;AACA;AACA;AACA,SApBA;;;AAuBA,KA7HA;;AA+HA;AACA,QAhIA,gBAgIA,QAhIA,EAgIA;;AAEA,yCAFA,CAEA;;AAEA;AACA;AACA;AACA,OAPA;;AASA,kBATA,GASA,IATA,CASA,YATA,CASA,YATA,GASA,IATA,CASA,YATA,CASA,cATA,GASA,IATA,CASA,cATA;;AAWA;AACA;AACA,gBADA;AAEA,yEAFA;AAGA;AACA,mCADA;AAEA,wCAFA;AAGA,oCAHA;AAIA,+FAJA;AAKA,uCALA,EAHA;;AAUA,wBAVA;AAWA;AACA;AACA;AACA,SAdA;AAeA;AACA;AACA,SAjBA;AAkBA,0BAlBA;;;AAqBA,KAjKA;;AAmKA;AACA,YApKA,sBAoKA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KA5KA;;AA8KA;AACA,cA/KA,4BA+KA,KA/KA,EA+KA;;AAEA;AACA;;AAEA,KApLA;;AAsLA;AACA,WAvLA,qBAuLA;;AAEA;AACA;AACA,iCADA;AAEA,0BAFA;;AAIA;;AAEA,KAhMA;;AAkMA;AACA,WAnMA,qBAmMA;;AAEA;AACA;AACA;;AAEA,KAzMA,EAlIA;;;AA8UA,UA9UA,sBA8UA;;AAEA;AACA;AACA,qBADA;AAEA,4CAFA;AAGA,yBAHA;AAIA;AACA;AACA;AACA,SAPA;;AASA,KAVA,MAUA;;AAEA;AACA;AACA;;AAEA,GAhWA,E;;;;;;;;;;;;;ACxEA;AAAA;AAAA;AAAA;AAAgnC,CAAgB,0lCAAG,EAAC,C;;;;;;;;;;;ACApoC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/mine/create-article/create-article.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/mine/create-article/create-article.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./create-article.vue?vue&type=template&id=6044ab4c&\"\nvar renderjs\nimport script from \"./create-article.vue?vue&type=script&lang=js&\"\nexport * from \"./create-article.vue?vue&type=script&lang=js&\"\nimport style0 from \"./create-article.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mine/create-article/create-article.vue\"\nexport default component.exports","export * from \"-!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./create-article.vue?vue&type=template&id=6044ab4c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.articleContent, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var g0 = item.type == 1 ? item.color.indexOf(\"#\") : null\n    var m0 = item.type == 1 ? isNaN(item.txSize * 1) : null\n    var g1 = item.type == 1 ? item.color.indexOf(\"#\") : null\n    return {\n      $orig: $orig,\n      g0: g0,\n      m0: m0,\n      g1: g1\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      return _vm.$utils.back()\n    }\n\n    _vm.e1 = function($event) {\n      _vm.isRecord = false\n      _vm.currentStep > 0 && _vm.currentStep--\n    }\n\n    _vm.e2 = function($event) {\n      _vm.isRecord = false\n      _vm.currentStep < _vm.history.length && _vm.currentStep++\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./create-article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./create-article.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"create-article\" :class=\"[theme]\">\r\n\t\t\r\n\t\t<nav-bar :text=\"fontCount + '字' + saveTip\" :isBackground=\"true\" textAlign=\"left\" :isBorder=\"true\">\r\n\t\t\t<template #left>\r\n\t\t\t\t<view class=\"g-left-box pointer\" @click=\"$utils.back()\"><text class=\"iconfont\">&#xe6ab;</text></view>\r\n\t\t\t</template>\r\n\t\t\t<template #right>\r\n\t\t\t\t<text class=\"g-right-box pointer\" @click=\"release()\">发布</text>\r\n\t\t\t</template>\r\n\t\t</nav-bar>\r\n\t\t\r\n\t\t<view class=\"container2\">\r\n\t\t\t<view class=\"cont\">\r\n\t\t\t\t<view class=\"title-input\">\r\n\t\t\t\t\t<view class=\"flex-y-c\">\r\n\t\t\t\t\t\t<input v-model=\"articleTitle\" class=\"input\" placeholder=\"请输入标题\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"content-box\">\r\n\t\t\t\t\t<view \r\n\t\t\t\t\tclass=\"item flex\" \r\n\t\t\t\t\t:style=\"[{\r\n\t\t\t\t\t\tjustifyContent: item.alignStyle == 1 ? 'flex-start' : item.alignStyle == 2 ? 'center' : 'flex-end'\r\n\t\t\t\t\t}]\"\r\n\t\t\t\t\tv-for=\"(item, index) in articleContent\" \r\n\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t\t\t<template v-if=\"item.type == 1\">\r\n\t\t\t\t\t\t\t<textarea \r\n\t\t\t\t\t\t\t:placeholder-style=\"'color: ' + (item.color.indexOf('#') > -1 ? item.color : '#' + item.color) + '; opacity: .45;'\"\r\n\t\t\t\t\t\t\t:style=\"[{\r\n\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\tlineHeight: '21px',\r\n\t\t\t\t\t\t\t\ttextAlign: item.alignStyle == 1 ? 'left' : item.alignStyle == 2 ? 'center' : 'right',\r\n\t\t\t\t\t\t\t\tcolor: item.color.indexOf('#') > -1 ? item.color : '#' + item.color,\r\n\t\t\t\t\t\t\t\tfontSize: isNaN(item.txSize * 1) ? item.txSize : item.txSize + 'px'\r\n\t\t\t\t\t\t\t}]\"\r\n\t\t\t\t\t\t\t@blur=\"handleBlur($event, index)\"\r\n\t\t\t\t\t\t\tv-model=\"item.content\" \r\n\t\t\t\t\t\t\t:placeholder=\"index === 0 && articleContent.length === 1 ? '请输入正文' : ''\" \r\n\t\t\t\t\t\t\tauto-height />\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-if=\"item.type == 2\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-if=\"item.type == 3\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-if=\"item.type == 4\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-if=\"item.type == 5\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"tool-bar flex-y-c\">\r\n\t\t\t\t<text class=\"icon iconfont pointer\">&#xe605;</text>\r\n\t\t\t\t<text class=\"icon iconfont pointer\">&#xe623;</text>\r\n\t\t\t\t<text class=\"icon iconfont pointer\">&#xe61d;</text>\r\n\t\t\t\t<text class=\"icon iconfont pointer\" @click=\"isRecord = false; currentStep > 0 && currentStep --;\">&#xe667;</text>\r\n\t\t\t\t<text class=\"icon iconfont pointer\" @click=\"isRecord = false; currentStep < history.length && currentStep ++;\">&#xe669;</text>\r\n\t\t\t\t<text class=\"icon iconfont pointer\">&#xe621;</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: 'createArticle',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuni: uni,\r\n\t\t\t\tisNaN,\r\n\t\t\t\tarticleId: null, // 文章id\r\n\t\t\t\tpublishType: 1, // 文章发布状态\r\n\t\t\t\tarticleTitle: null, // 文章标题\r\n\t\t\t\tarticleContent: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\talignStyle: 1,\r\n\t\t\t\t\t\tcolor: '#000000',\r\n\t\t\t\t\t\tcontent: null,\r\n\t\t\t\t\t\ttxSize: '16px',\r\n\t\t\t\t\t\ttype: 1\r\n\t\t\t\t\t}\r\n\t\t\t\t], // 文章正文\r\n\t\t\t\tposition: [0, 0], // 用于保存最后编辑的光标位置\r\n\t\t\t\ttime: 2000, // 多长时间执行一次\r\n\t\t\t\thistory: [], // 历史栈\r\n\t\t\t\tmaxLength: 500, // 历史栈最大长度\r\n\t\t\t\tcurrentStep: 0, // 当前步数\r\n\t\t\t\tisRecord: true,\r\n\t\t\t\tsaveTip: '',\r\n\t\t\t};\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tsaveTip(value) {\r\n\t\t\t\tif (value && value != '（保存中...）') {\r\n\t\t\t\t\tthis.timer2 && clearTimeout(this.timer2);\r\n\t\t\t\t\tthis.timer2 = setTimeout(() => {\r\n\t\t\t\t\t\tthis.saveTip = '';\r\n\t\t\t\t\t}, this.time / 2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tarticleTitle() {\r\n\t\t\t\tthis.handleChange();\r\n\t\t\t\t\r\n\t\t\t\tthis.timer3 && clearTimeout(this.timer3);\r\n\t\t\t\tthis.timer3 = setTimeout(() => {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}, this.time * 2)\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tarticleContent: {\r\n\t\t\t\thandler() {\r\n\t\t\t\t\tthis.handleChange();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.timer3 && clearTimeout(this.timer3);\r\n\t\t\t\t\tthis.timer3 = setTimeout(() => {\r\n\t\t\t\t\t\tthis.save();\r\n\t\t\t\t\t}, this.time * 2)\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true\r\n\t\t\t},\r\n\t\t\tcurrentStep(value, oldValue) {\r\n\t\t\t\t\r\n\t\t\t\tif (this.isRecord) return\r\n\t\t\t\t\r\n\t\t\t\tif (this.history.length !== value) {\r\n\t\t\t\t\tif (value > oldValue) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet keys = ['articleContent', 'articleTitle'];\r\n\t\t\t\t\t\tkeys.forEach(key => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet count = value, flag = true;\r\n\t\t\t\t\t\t\twhile (this.history[count]) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlet temp = this.history[count].filter(val => val[0] === key)[0];\r\n\t\t\t\t\t\t\t\tif (temp) {\r\n\t\t\t\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t\t\t\t\tif (key === 'articleContent') this[key] = JSON.parse(temp[1]);\r\n\t\t\t\t\t\t\t\t\telse this[key] = temp[1];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tcount ++;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\t\t\tif (key === 'articleContent') this[key] = JSON.parse(this.oldArticleContent);\r\n\t\t\t\t\t\t\t\telse this[key] = this.oldArticleTitle;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis.history[value].forEach(val => {\r\n\t\t\t\t\t\t\tif (val[0] === 'articleContent') this[val[0]] = JSON.parse(val[1]);\r\n\t\t\t\t\t\t\telse this[val[0]] = val[1];\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.articleContent = JSON.parse(this.oldArticleContent);\r\n\t\t\t\t\tthis.articleTitle = this.oldArticleTitle;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ttheme() {\r\n\t\t\t\treturn this.$store.state.theme\r\n\t\t\t},\r\n\t\t\t// 文章封面\r\n\t\t\tarticleCover() {\r\n\t\t\t\treturn this.articleContent.filter(item => item.type == 2)[0] && this.articleContent.filter(item => item.type == 2)[0].content || null;\r\n\t\t\t},\r\n\t\t\t// 文章字数\r\n\t\t\tfontCount() {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tthis.articleContent.filter(item => item.type == 1).forEach(item => {\r\n\t\t\t\t\tcount += (item.content || '').length;\r\n\t\t\t\t})\r\n\t\t\t\treturn count\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\t\r\n\t\t\tthis.articleId = options.articleId || null;\r\n\t\t\t\r\n\t\t\tthis.oldArticleTitle = this.articleTitle;\r\n\t\t\tthis.oldArticleContent = JSON.stringify(this.articleContent);\r\n\t\t\t\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t\r\n\t\t\tthis.getArticleInfo();\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t\r\n\t\t\t// 获取文章详情\r\n\t\t\tgetArticleInfo() {\r\n\t\t\t\t\r\n\t\t\t\tif (this.articleId) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 加载动画\r\n\t\t\t\t\tthis.timer2 && clearTimeout(this.timer2);\r\n\t\t\t\t\tthis.timer2 = this.$utils.loading.call(uni, '加载中...');\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.$utils.request({\r\n\t\t\t\t\t\tuni,\r\n\t\t\t\t\t\turl: '/eso/article/edit/detail',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tarticleId: this.articleId\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tshowErrorType: 2,\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tthis.get_detail = true;\r\n\t\t\t\t\t\t\tthis.publishType = (res.data.publishType || 1) * 1;\r\n\t\t\t\t\t\t\tthis.articleTitle = res.data.articleTitle || '';\r\n\t\t\t\t\t\t\tif (res.data.articleContent.length > 0) this.articleContent =  res.data.articleContent;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcallback: () => {\r\n\t\t\t\t\t\t\tclearTimeout(this.timer2);\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 处理文章变化\r\n\t\t\thandleChange() {\r\n\t\t\t\t\r\n\t\t\t\tthis.timer1 && clearTimeout(this.timer1);\r\n\t\t\t\tthis.timer1 = setTimeout(() => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!this.isRecord) {\r\n\t\t\t\t\t\tthis.isRecord = true;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (this.history.length !== this.currentStep) {\r\n\t\t\t\t\t\tlet keys = ['articleContent', 'articleTitle'];\r\n\t\t\t\t\t\tkeys.forEach(key => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet temp = this.history[this.currentStep].filter(val => val[0] === key)[0];\r\n\t\t\t\t\t\t\tif (temp) {\r\n\t\t\t\t\t\t\t\tif (key === 'articleContent') this.oldArticleContent = temp[1];\r\n\t\t\t\t\t\t\t\telse this.oldArticleTitle = temp[1];\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlet count = this.currentStep, flag = true;\r\n\t\t\t\t\t\t\t\twhile (this.history[count]) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tlet temp = this.history[count].filter(val => val[0] === key)[0];\r\n\t\t\t\t\t\t\t\t\tif (temp) {\r\n\t\t\t\t\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t\t\t\t\t\tif (key === 'articleContent') this.oldArticleContent = JSON.parse(temp[1]);\r\n\t\t\t\t\t\t\t\t\t\telse this.oldArticleTitle = temp[1];\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tcount ++;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.history = this.history.slice(0, this.currentStep);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet temp = [];\r\n\t\t\t\t\tif (this.articleTitle !== this.oldArticleTitle) {\r\n\t\t\t\t\t\ttemp.push(['articleTitle', this.oldArticleTitle]);\r\n\t\t\t\t\t\tthis.oldArticleTitle = this.articleTitle;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (JSON.stringify(this.articleContent) !== this.oldArticleContent) {\r\n\t\t\t\t\t\ttemp.push(['articleContent', this.oldArticleContent]);\r\n\t\t\t\t\t\tthis.oldArticleContent = JSON.stringify(this.articleContent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.history.push(temp);\r\n\t\t\t\t\tthis.currentStep ++;\r\n\t\t\t\t\tthis.overflow();\r\n\t\t\t\t\t\r\n\t\t\t\t}, this.time)\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 发布\r\n\t\t\trelease(callback) {\r\n\t\t\t\t\r\n\t\t\t\t// 加载动画\r\n\t\t\t\tthis.timer2 && clearTimeout(this.timer2);\r\n\t\t\t\tthis.timer2 = this.$utils.loading.call(uni, '发布中...');\r\n\t\t\t\t\r\n\t\t\t\tlet { articleCover, articleTitle, articleContent } = this;\r\n\t\t\t\t\t\r\n\t\t\t\tthis.$utils.request({\r\n\t\t\t\t\tuni,\r\n\t\t\t\t\turl: this.publishType !== 1 || this.articleId ? '/eso/article/edit' : '/eso/article/create',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tarticleId: this.articleId,\r\n\t\t\t\t\t\tarticleContent,\r\n\t\t\t\t\t\tarticleCover,\r\n\t\t\t\t\t\tarticleTitle: (articleTitle || '').trim().length <= 0 ? this.getTime() : articleTitle,\r\n\t\t\t\t\t\tpublishType: 2,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tshowErrorType: 2,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tthis.$utils.toast.call(uni, res.msg);\r\n\t\t\t\t\t\tthis.$utils.back();\r\n\t\t\t\t\t\tthis.release_ed = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback: () => {\r\n\t\t\t\t\t\tclearTimeout(this.timer2);\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tcallback && callback();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 保存\r\n\t\t\tsave(callback) {\r\n\t\t\t\t\r\n\t\t\t\tif (this.publishType !== 1) return // 不做自动保存操作 - 正式文章\r\n\t\t\t\t\r\n\t\t\t\tif (this.get_detail) {\r\n\t\t\t\t\tthis.get_detail = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\tlet { articleCover, articleTitle, articleContent } = this;\r\n\t\t\t\t\r\n\t\t\t\tthis.saveTip = '（保存中...）';\r\n\t\t\t\tthis.$utils.request({\r\n\t\t\t\t\tuni,\r\n\t\t\t\t\turl: this.articleId ? '/eso/article/edit' : '/eso/article/create',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tarticleId: this.articleId,\r\n\t\t\t\t\t\tarticleContent,\r\n\t\t\t\t\t\tarticleCover,\r\n\t\t\t\t\t\tarticleTitle: (articleTitle || '').trim().length <= 0 ? this.getTime() : articleTitle,\r\n\t\t\t\t\t\tpublishType: this.publishType,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tshowErrorType: 2,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tthis.saveTip = '（已保存）';\r\n\t\t\t\t\t\tthis.articleId = res.data.articleId;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\tthis.saveTip = '（保存失败）';\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 防止历史栈过大\r\n\t\t\toverflow() {\r\n\t\t\t\t\r\n\t\t\t\tlet len = this.history.length - this.maxLength;\r\n\t\t\t\tif (len > 0) {\r\n\t\t\t\t\tthis.history = this.history.filter((val, index) => index >= len);\r\n\t\t\t\t\tthis.currentStep = this.maxLength;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 处理输入框失焦\r\n\t\t\thandleBlur({ detail }, index) {\r\n\t\t\t\t\r\n\t\t\t\tthis.position[0] = index;\r\n\t\t\t\tthis.position[1] = detail.cursor;\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 获取当前时间\r\n\t\t\tgetTime() {\r\n\t\t\t\t\t\r\n\t\t\t\tlet date  = new Date();\r\n\t\t\t\tlet year  = date.getFullYear(),\r\n\t\t\t\t\tmonth = date.getMonth() + 1,\r\n\t\t\t\t\tday   = date.getDate();\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn year + '-' + month + '-' + day;\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 销毁\r\n\t\t\tdestroy() {\r\n\t\t\t\t\r\n\t\t\t\tthis.timer1 && clearTimeout(timer1);\r\n\t\t\t\tthis.timer2 && clearTimeout(timer2);\r\n\t\t\t\tthis.timer3 && clearTimeout(timer3);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\t\r\n\t\t\tif (!this.release_ed && this.publishType !== 1 && this.history.length > 0) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '退出编辑',\r\n\t\t\t\t\tcontent: '当前编辑未保存发布，退出将放弃本次修改，是否确认？',\r\n\t\t\t\t\tconfirmText: '发布',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t// 点击确认发布正式文章\r\n\t\t\t\t\t\tthis.release(this.destroy.bind(this));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else {\r\n\t\t\t\t\r\n\t\t\t\t// 草稿自动保存\r\n\t\t\t\tthis.save(this.destroy.bind(this));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t// #ifndef H5 || MP\r\n\t\t,\r\n\t\tonBackPress(e) {\r\n\t\t\t\r\n\t\t\tlet page = getCurrentPages();\r\n\t\t\t\r\n\t\t\tif (page[page.length - 2].route !== 'pages/mine/my-article/my-article') {\r\n\t\t\t\t\r\n\t\t\t\tthis.$utils.toPage.call(uni, '/pages/mine/my-article/my-article', 'redirectTo');\r\n\t\t\t\treturn true \r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t}\r\n\t\t// #endif\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t\r\n\t.setColor(@color) {\r\n\t\t.create-article.@{color} { \r\n\t\t\t.g-left-box {\r\n\t\t\t\tmargin-right: 15px;\r\n\t\t\t\tcolor: ~\"@{@{color}-rule-bright}\";\r\n\t\t\t}\r\n\t\t\t.g-right-box {\r\n\t\t\t\tfont-size: 15px;\r\n\t\t\t\tcolor: ~\"@{@{color}-main-bright}\";\r\n\t\t\t}\r\n\t\t\t.cont {\r\n\t\t\t\theight: calc(100% - 45px);\r\n\t\t\t\tbackground-color: ~\"@{@{color}-fore}\";\r\n\t\t\t\toverflow-y: auto;\r\n\t\t\t\t.title-input {\r\n\t\t\t\t\theight: 55px;\r\n\t\t\t\t\tpadding: 0 12px;\r\n\t\t\t\t\t.flex-y-c {\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tborder-bottom: 2px dashed ~\"@{@{color}-sub}\";\r\n\t\t\t\t\t\t.input-placeholder {\r\n\t\t\t\t\t\t\tcolor: ~\"@{@{color}-rule-bright}\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.input {\r\n\t\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\t\tfont-size: 22px;\r\n\t\t\t\t\t\t\tletter-spacing: 1px;\r\n\t\t\t\t\t\t\tcolor: ~\"@{@{color}-rule-dark}\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.content-box {\r\n\t\t\t\t\theight: calc(100% - 55px);\r\n\t\t\t\t\toverflow-y: auto;\r\n\t\t\t\t\tpadding: 15px 12px;\r\n\t\t\t\t\t.textarea-placeholder {\r\n\t\t\t\t\t\tcolor: ~\"@{@{color}-rule-bright}\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.tool-bar {\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\theight: 45px;\r\n\t\t\t\tbackground-color: ~\"@{@{color}-bg}\";\r\n\t\t\t\t.icon {\r\n\t\t\t\t\tfont-size: 18px;\r\n\t\t\t\t\tcolor: ~\"@{@{color}-rule-bright}\";\r\n\t\t\t\t}\r\n\t\t\t\t&.active .icon {\r\n\t\t\t\t\tcolor: ~\"@{@{color}-main-bright}\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.loop(@i) when (@i < length(@themeList)+1){\r\n\t\t.setColor(extract(@themeList, @i));\r\n\t\t.loop(@i+1);\r\n\t}\r\n\t.loop(1);\r\n\r\n</style>\r\n","import mod from \"-!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--10-oneOf-1-0!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-1!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-2!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--10-oneOf-1-3!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\less-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-4!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-5!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./create-article.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--10-oneOf-1-0!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-1!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-2!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--10-oneOf-1-3!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\less-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-4!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-5!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!M:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./create-article.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608000520162\n      var cssReload = require(\"M:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}